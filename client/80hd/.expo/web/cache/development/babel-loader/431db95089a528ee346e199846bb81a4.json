{"ast":null,"code":"var _jsxFileName = \"/Users/naomiperez/Documents/GitHub/80/client/80hd/src/containers/Home.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Calendar from \"../modules/calendar/Calendar\";\nimport Mood from \"../components/Mood\";\nimport Theme from \"../styles/colors\";\nimport LoggerView from \"../components/LoggerView\";\nimport firebase from \"firebase/app\";\nimport 'firebase/firestore';\nimport 'firebase/auth';\nvar today = new Date().toDateString();\nvar moodInit = 10;\nvar user = {\n  name: 'Naomi'\n};\n\nfunction Home(props) {\n  var date;\n  var mood;\n  var user = props.user;\n\n  function getTodayLog() {\n    var todayDoc, collectionRef;\n    return _regeneratorRuntime.async(function getTodayLog$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(db.collection('moodLog').where(\"timestamp\", \"==\", date).get().then(function (querySnapshot) {\n              if (querySnapshot.docs.length === 0) {\n                console.log(\"no Documents from today\");\n                collectionRef.add(data);\n              } else if (querySnapshot.docs.length > 1) {\n                console.log(\"More than one document from today\");\n              }\n\n              todayDoc = querySnapshot.docs[0];\n            }).catch(function (error) {\n              console.log(\"Error getting documents: \", error);\n            }));\n\n          case 2:\n            collectionRef = _context.sent;\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function logMood(mood) {\n    console.log(\"Mood: \" + mood + \" Date: \" + date);\n    var db = firebase.firestore();\n    var data = {\n      date: date,\n      mood: mood,\n      weekday: date.getDay(),\n      user: user\n    };\n\n    if (todayDoc) {\n      todayDoc.ref.update({\n        mood: mood\n      }).then(function () {\n        console.log(\"Document successfully updated\");\n      }).catch(function (error) {\n        console.error(\"Error updating document: \", error);\n      });\n    } else {\n      console.log(\"Something went wrong with collection/doc query.\");\n    }\n  }\n\n  function logDate(obj) {\n    console.log(obj.date);\n  }\n\n  return React.createElement(View, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }\n  }, React.createElement(Calendar, {\n    date: date,\n    logDate: logDate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }\n  }), React.createElement(LoggerView, {\n    selector: React.createElement(Mood, {\n      mood: mood,\n      logMood: logMood,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 35\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }\n  }));\n}\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: Theme.cream\n  }\n});\nexport default Home;","map":{"version":3,"sources":["/Users/naomiperez/Documents/GitHub/80/client/80hd/src/containers/Home.js"],"names":["React","useState","Calendar","Mood","Theme","LoggerView","firebase","today","Date","toDateString","moodInit","user","name","Home","props","date","mood","getTodayLog","db","collection","where","get","then","querySnapshot","docs","length","console","log","collectionRef","add","data","todayDoc","catch","error","logMood","firestore","weekday","getDay","ref","update","logDate","obj","styles","container","StyleSheet","create","flex","backgroundColor","cream"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { View, StyleSheet } from 'react-native';\nimport Calendar from '../modules/calendar/Calendar'\nimport Mood from '../components/Mood'\nimport Theme from '../styles/colors'\nimport LoggerView from '../components/LoggerView'\nimport firebase from \"firebase/app\"\nimport 'firebase/firestore'\nimport 'firebase/auth'\n\nconst today = new Date().toDateString();\nconst moodInit = 10;\n\nconst user = {\n    name: 'Naomi'\n}\n\nfunction Home(props) {\n    // Use state variables to store date and mood\n    // const [mood, setMood] = useState(moodInit)\n    // const [date, setDate] = useState(today)\n    let date;\n    let mood;\n\n    const user = props.user\n\n    async function getTodayLog(){\n\n        // If user has already logged something today, then get the document\n        // with today's date from the 'moodLog' Firestore collection\n        let todayDoc;\n        \n        const collectionRef = await db.collection('moodLog').where(\"timestamp\", \"==\", date).get()\n        .then(querySnapshot => {\n            if (querySnapshot.docs.length === 0) {\n                console.log(\"no Documents from today\")\n\n\n                collectionRef.add(data);\n            } else if (querySnapshot.docs.length > 1) {\n                console.log(\"More than one document from today\")\n            }\n\n            todayDoc = querySnapshot.docs[0]\n            //  id & data properties\n        })\n        .catch((error) => {\n            console.log(\"Error getting documents: \", error);\n        });\n\n    }\n\n    /********************/\n    function logMood(mood) {\n        console.log(`Mood: ${mood} Date: ${date}`)\n\n        const db = firebase.firestore()\n        \n\n        // Create new data for day and add it as a document\n        let data = {\n            date: date,\n            mood: mood,\n            weekday: date.getDay(),\n            user: user\n        }\n        // If we are changing the mood that was previously logged \n        // i.e. (document for today already exists)\n        if (todayDoc) {\n            todayDoc.ref.update({\n                mood: mood\n            }).then(() => {\n                console.log(\"Document successfully updated\");\n            }).catch((error) => {\n                // The document probably doesn't exist.\n                console.error(\"Error updating document: \", error);\n            });\n        } else {\n            console.log(\"Something went wrong with collection/doc query.\")\n        }\n    }\n\n    function logDate(obj) {\n        console.log(obj.date)\n        // setDate(obj.date)\n    }\n\n    return (\n\n        <View style={styles.container}>\n            {/* import the context and pass along the data */}\n            <Calendar date={date} logDate={logDate} />\n            <LoggerView selector={<Mood mood={mood} logMood={logMood} />} />\n        </View>\n    );\n}\n\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        backgroundColor: Theme.cream\n    }\n});\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}