{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/naomiperez/Documents/GitHub/80/client/80hd/src/CurrentUserContext.js\";\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React from \"react\";\nimport firebase from \"firebase/app\";\nimport 'firebase/firestore';\nimport 'firebase/auth';\nimport { firebaseConfig } from \"./src/firebase/config\";\nexport var CurrentUserContext = React.createContext();\nexport var CurrentUserProvider = function CurrentUserProvider(_ref) {\n  var children = _ref.children;\n\n  var _React$useState = React.useState(null),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      currentUser = _React$useState2[0],\n      setCurrentUser = _React$useState2[1];\n\n  var fetchCurrentUser = function fetchCurrentUser() {\n    var db, usersRef;\n    return _regeneratorRuntime.async(function fetchCurrentUser$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            db = firebase.firestore();\n            usersRef = db.collection('users');\n            firebase.auth().onAuthStateChanged(function (user) {\n              if (user) {\n                usersRef.doc(user.uid).get().then(function (document) {\n                  var userData = document.data();\n                  setCurrentUser(userData);\n                  console.log(user.value);\n                }).catch(function (error) {\n                  console.log(\"Error: \" + error);\n                });\n              } else {\n                console.log(\"User is null\");\n                setCurrentUser(null);\n              }\n            });\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return React.createElement(CurrentUserContext.Provider, {\n    value: {\n      currentUser: currentUser,\n      fetchCurrentUser: fetchCurrentUser\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }\n  }, children);\n};\nexport var useCurrentUser = function useCurrentUser() {\n  return React.useContext(CurrentUserContext);\n};","map":{"version":3,"sources":["/Users/naomiperez/Documents/GitHub/80/client/80hd/src/CurrentUserContext.js"],"names":["React","firebase","firebaseConfig","CurrentUserContext","createContext","CurrentUserProvider","children","useState","currentUser","setCurrentUser","fetchCurrentUser","db","firestore","usersRef","collection","auth","onAuthStateChanged","user","doc","uid","get","then","document","userData","data","console","log","value","catch","error","useCurrentUser","useContext"],"mappings":";;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,cAArB;AACA,OAAO,oBAAP;AACA,OAAO,eAAP;AACA,SAASC,cAAT;AAEA,OAAO,IAAMC,kBAAkB,GAAGH,KAAK,CAACI,aAAN,EAA3B;AAEP,OAAO,IAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,OAAkB;AAAA,MAAfC,QAAe,QAAfA,QAAe;;AACjD,wBAAsCN,KAAK,CAACO,QAAN,CAAe,IAAf,CAAtC;AAAA;AAAA,MAAOC,WAAP;AAAA,MAAoBC,cAApB;;AAEA,MAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB;AAAA;AAAA;AAAA;AAAA;AAAA;AACfC,YAAAA,EADe,GACVV,QAAQ,CAACW,SAAT,EADU;AAEfC,YAAAA,QAFe,GAEJF,EAAE,CAACG,UAAH,CAAc,OAAd,CAFI;AAKrBb,YAAAA,QAAQ,CAACc,IAAT,GAAgBC,kBAAhB,CAAmC,UAAAC,IAAI,EAAI;AACvC,kBAAIA,IAAJ,EAAU;AAGNJ,gBAAAA,QAAQ,CACHK,GADL,CACSD,IAAI,CAACE,GADd,EAEKC,GAFL,GAGKC,IAHL,CAGU,UAACC,QAAD,EAAc;AAChB,sBAAMC,QAAQ,GAAGD,QAAQ,CAACE,IAAT,EAAjB;AAEAf,kBAAAA,cAAc,CAACc,QAAD,CAAd;AACAE,kBAAAA,OAAO,CAACC,GAAR,CAAYT,IAAI,CAACU,KAAjB;AACH,iBARL,EASKC,KATL,CASW,UAACC,KAAD,EAAW;AACdJ,kBAAAA,OAAO,CAACC,GAAR,CAAY,YAAYG,KAAxB;AACH,iBAXL;AAaH,eAhBD,MAgBO;AACHJ,gBAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACAjB,gBAAAA,cAAc,CAAC,IAAD,CAAd;AACH;AACJ,aArBD;;AALqB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAzB;;AA8BA,SACI,oBAAC,kBAAD,CAAoB,QAApB;AAA6B,IAAA,KAAK,EAAE;AAAED,MAAAA,WAAW,EAAXA,WAAF;AAAeE,MAAAA,gBAAgB,EAAhBA;AAAf,KAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKJ,QADL,CADJ;AAKH,CAtCM;AAwCP,OAAO,IAAMwB,cAAc,GAAG,SAAjBA,cAAiB;AAAA,SAAM9B,KAAK,CAAC+B,UAAN,CAAiB5B,kBAAjB,CAAN;AAAA,CAAvB","sourcesContent":["import React from \"react\"\nimport firebase from \"firebase/app\"\nimport 'firebase/firestore'\nimport 'firebase/auth'\nimport { firebaseConfig } from './src/firebase/config'\n\nexport const CurrentUserContext = React.createContext()\n\nexport const CurrentUserProvider = ({ children }) => {\n    const [currentUser, setCurrentUser] = React.useState(null)\n\n    const fetchCurrentUser = async () => {\n        const db = firebase.firestore();\n        const usersRef = db.collection('users');\n\n        // returns the currently logged in user\n        firebase.auth().onAuthStateChanged(user => {\n            if (user) {\n                // fetch all the extra user data that we stored in Firestore\n                // and set it on the current componentâ€™s state\n                usersRef\n                    .doc(user.uid)\n                    .get()\n                    .then((document) => {\n                        const userData = document.data()\n\n                        setCurrentUser(userData)\n                        console.log(user.value)\n                    })\n                    .catch((error) => {\n                        console.log(\"Error: \" + error)\n                    });\n\n            } else {\n                console.log(\"User is null\")\n                setCurrentUser(null)\n            }\n        })\n    }\n\n\n    return (\n        <CurrentUserContext.Provider value={{ currentUser, fetchCurrentUser }}>\n            {children}\n        </CurrentUserContext.Provider>\n    )\n}\n\nexport const useCurrentUser = () => React.useContext(CurrentUserContext)"]},"metadata":{},"sourceType":"module"}