{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/naomiperez/Documents/GitHub/80/client/80hd/src/containers/Home.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Calendar from \"../modules/calendar/Calendar\";\nimport Mood from \"../components/Mood\";\nimport Theme from \"../styles/colors\";\nimport LoggerView from \"../components/LoggerView\";\nimport firebase from \"firebase/app\";\nimport 'firebase/firestore';\nimport 'firebase/auth';\nvar today = new Date();\nvar moodInit = 10;\nvar user = {\n  name: 'Naomi'\n};\n\nfunction Home() {\n  var _useState = useState(moodInit),\n      _useState2 = _slicedToArray(_useState, 2),\n      mood = _useState2[0],\n      setMood = _useState2[1];\n\n  var _useState3 = useState(today),\n      _useState4 = _slicedToArray(_useState3, 2),\n      date = _useState4[0],\n      setDate = _useState4[1];\n\n  var user = this.props.user;\n\n  function getTodayLog() {\n    var db, todayRef;\n    return _regeneratorRuntime.async(function getTodayLog$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            db = firebase.firestore();\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(db.collection('moodLog').where(\"timestamp\", \"==\", date).get().then(function (querySnapshot) {\n              if (querySnapshot.docs.length === 0) {\n                console.log(\"No Documents from today\");\n                return undefined;\n              } else if (querySnapshot.docs.length > 1) {\n                console.log(\"More than one document from today\");\n              }\n\n              return querySnapshot.docs[0];\n            }).catch(function (error) {\n              console.log(\"Error getting documents: \", error);\n            }));\n\n          case 3:\n            todayRef = _context.sent;\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function logMood(mood) {\n    console.log(\"Mood: \" + mood + \" Date: \" + date);\n    setMood(mood);\n    var day = date.getDay();\n    var formattedDate = date.getFullYear().toString() + '-' + date.getMonth().toString() + '-' + date.getDate().toString();\n    var data = {\n      date: formattedDate,\n      mood: mood,\n      weekday: day,\n      user: user\n    };\n    getTodayLog().then(function (todayRef) {\n      if (todayRef) {\n        todayRef.ref.update(data).then(function () {\n          console.log(\"Document successfully updated\");\n        }).catch(function (error) {\n          console.error(\"Error updating document: \", error);\n        });\n      } else {\n        firebase.firestore().collection('moodLog').doc().set(data);\n      }\n    });\n  }\n\n  function logDate(obj) {\n    console.log(obj.date);\n    setDate(obj.date);\n  }\n\n  return React.createElement(View, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }\n  }, React.createElement(Calendar, {\n    date: date,\n    logDate: logDate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }), React.createElement(LoggerView, {\n    selector: React.createElement(Mood, {\n      mood: mood,\n      logMood: logMood,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 35\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }\n  }));\n}\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: Theme.cream\n  }\n});\nexport default Home;","map":{"version":3,"sources":["/Users/naomiperez/Documents/GitHub/80/client/80hd/src/containers/Home.js"],"names":["React","useState","Calendar","Mood","Theme","LoggerView","firebase","today","Date","moodInit","user","name","Home","mood","setMood","date","setDate","props","getTodayLog","db","firestore","collection","where","get","then","querySnapshot","docs","length","console","log","undefined","catch","error","todayRef","logMood","day","getDay","formattedDate","getFullYear","toString","getMonth","getDate","data","weekday","ref","update","doc","set","logDate","obj","styles","container","StyleSheet","create","flex","backgroundColor","cream"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { View, StyleSheet } from 'react-native';\nimport Calendar from '../modules/calendar/Calendar'\nimport Mood from '../components/Mood'\nimport Theme from '../styles/colors'\nimport LoggerView from '../components/LoggerView'\nimport firebase from \"firebase/app\"\nimport 'firebase/firestore'\nimport 'firebase/auth'\n\nconst today = new Date();\nconst moodInit = 10;\n\nconst user = {\n    name: 'Naomi'\n}\n\nfunction Home() {\n    // Use state variables to store date and mood\n    const [mood, setMood] = useState(moodInit)\n    const [date, setDate] = useState(today)\n\n    const user = this.props.user\n\n    async function getTodayLog() {\n        const db = firebase.firestore()\n\n        // If user has already logged something today, then get the document\n        // with today's date from the 'moodLog' Firestore collection\n\n        const todayRef = await db.collection('moodLog').where(\"timestamp\", \"==\", date).get()\n            .then(querySnapshot => {\n                if (querySnapshot.docs.length === 0) {\n                    console.log(\"No Documents from today\")\n                    return undefined\n                } else if (querySnapshot.docs.length > 1) {\n                    console.log(\"More than one document from today\")\n                }\n\n                return querySnapshot.docs[0]\n                //  id & data properties\n            })\n            .catch((error) => {\n                console.log(\"Error getting documents: \", error);\n            });\n\n    }\n\n    /********************/\n    function logMood(mood) {\n        console.log(`Mood: ${mood} Date: ${date}`)\n        setMood(mood)\n        let day = date.getDay()\n        const formattedDate = date.getFullYear().toString()+'-'+date.getMonth().toString()+'-'+date.getDate().toString()\n\n        // Create new data for day and add it as a document\n        const data = {\n            date: formattedDate,\n            mood: mood,\n            weekday: day,\n            user: user\n        }\n\n        getTodayLog().then((todayRef) => {\n            if (todayRef){\n                todayRef.ref.update(data)\n                .then(() => {\n                    console.log(\"Document successfully updated\");\n                }).catch((error) => {\n                    // The document probably doesn't exist.\n                    console.error(\"Error updating document: \", error);\n                });\n            } else {\n                // New doc for 'today''s date\n                firebase.firestore().collection('moodLog').doc().set(data)\n            }\n        })\n    }\n\n    function logDate(obj) {\n        console.log(obj.date)\n        setDate(obj.date)\n    }\n\n    return (\n\n        <View style={styles.container}>\n            {/* import the context and pass along the data */}\n            <Calendar date={date} logDate={logDate} />\n            <LoggerView selector={<Mood mood={mood} logMood={logMood} />} />\n        </View>\n    );\n}\n\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        backgroundColor: Theme.cream\n    }\n});\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}