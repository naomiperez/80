{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/naomiperez/Documents/GitHub/80/client/80hd/src/containers/Home.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Calendar from \"../modules/calendar/Calendar\";\nimport Mood from \"../components/Mood\";\nimport Theme from \"../styles/colors\";\nimport LoggerView from \"../components/LoggerView\";\nimport firebase from \"firebase/app\";\nimport 'firebase/firestore';\nimport 'firebase/auth';\nimport UserContext from \"../../App\";\nvar today = new Date();\nvar moodInit = 10;\n\nfunction Home(props) {\n  var _useState = useState(moodInit),\n      _useState2 = _slicedToArray(_useState, 2),\n      mood = _useState2[0],\n      setMood = _useState2[1];\n\n  var _useState3 = useState(today),\n      _useState4 = _slicedToArray(_useState3, 2),\n      date = _useState4[0],\n      setDate = _useState4[1];\n\n  var userRef = React.useContext(UserContext);\n  console.log(userRef);\n\n  function getTodayLog() {\n    var db, todayRef;\n    return _regeneratorRuntime.async(function getTodayLog$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            db = firebase.firestore();\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(db.collection('moodLog').where(\"timestamp\", \"==\", date).get().then(function (querySnapshot) {\n              if (querySnapshot.docs.length === 0) {\n                console.log(\"No Documents from today\");\n                return undefined;\n              } else if (querySnapshot.docs.length > 1) {\n                console.log(\"More than one document from today\");\n              }\n\n              return querySnapshot.docs[0];\n            }).catch(function (error) {\n              console.log(\"Error getting documents: \", error);\n            }));\n\n          case 3:\n            todayRef = _context.sent;\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function logMood(mood) {\n    console.log(\"Mood: \" + mood + \" Date: \" + date);\n    setMood(mood);\n    var day = date.getDay();\n    var formattedDate = date.getFullYear().toString() + '-' + date.getMonth().toString() + '-' + date.getDate().toString();\n    var data;\n\n    if (userRef) {\n      data = {\n        date: formattedDate,\n        mood: mood,\n        weekday: day,\n        user: userRef\n      };\n    } else {\n      if (props.user) {\n        data = {\n          date: formattedDate,\n          mood: mood,\n          weekday: day,\n          user: user\n        };\n      }\n    }\n\n    getTodayLog().then(function (todayRef) {\n      if (todayRef) {\n        todayRef.ref.update(data).then(function () {\n          console.log(\"Document successfully updated\");\n        }).catch(function (error) {\n          console.error(\"Error updating document: \", error);\n        });\n      } else {\n        firebase.firestore().collection('moodLog').doc().set(data);\n      }\n    });\n  }\n\n  function logDate(obj) {\n    console.log(obj.date);\n    setDate(obj.date);\n  }\n\n  return React.createElement(View, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }\n  }, React.createElement(Calendar, {\n    date: date,\n    logDate: logDate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }\n  }), React.createElement(LoggerView, {\n    selector: React.createElement(Mood, {\n      mood: mood,\n      logMood: logMood,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 35\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  }));\n}\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: Theme.cream\n  }\n});\nexport default Home;","map":{"version":3,"sources":["/Users/naomiperez/Documents/GitHub/80/client/80hd/src/containers/Home.js"],"names":["React","useState","Calendar","Mood","Theme","LoggerView","firebase","UserContext","today","Date","moodInit","Home","props","mood","setMood","date","setDate","userRef","useContext","console","log","getTodayLog","db","firestore","collection","where","get","then","querySnapshot","docs","length","undefined","catch","error","todayRef","logMood","day","getDay","formattedDate","getFullYear","toString","getMonth","getDate","data","weekday","user","ref","update","doc","set","logDate","obj","styles","container","StyleSheet","create","flex","backgroundColor","cream"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { View, StyleSheet } from 'react-native';\nimport Calendar from '../modules/calendar/Calendar'\nimport Mood from '../components/Mood'\nimport Theme from '../styles/colors'\nimport LoggerView from '../components/LoggerView'\nimport firebase from \"firebase/app\"\nimport 'firebase/firestore'\nimport 'firebase/auth'\nimport UserContext from '../../App'\n\nconst today = new Date();\nconst moodInit = 10;\n\nfunction Home(props) {\n    // Use state variables to store date and mood\n    const [mood, setMood] = useState(moodInit)\n    const [date, setDate] = useState(today)\n\n    const userRef = React.useContext(UserContext);\n    console.log(userRef)\n\n    async function getTodayLog() {\n        const db = firebase.firestore()\n\n        // If user has already logged something today, then get the document\n        // with today's date from the 'moodLog' Firestore collection\n\n        const todayRef = await db.collection('moodLog').where(\"timestamp\", \"==\", date).get()\n            .then(querySnapshot => {\n                if (querySnapshot.docs.length === 0) {\n                    console.log(\"No Documents from today\")\n                    return undefined\n                } else if (querySnapshot.docs.length > 1) {\n                    console.log(\"More than one document from today\")\n                }\n\n                return querySnapshot.docs[0]\n                //  id & data properties\n            })\n            .catch((error) => {\n                console.log(\"Error getting documents: \", error);\n            });\n\n    }\n\n    /********************/\n    function logMood(mood) {\n        console.log(`Mood: ${mood} Date: ${date}`)\n\n        setMood(mood)\n\n        /* Format date to pass to document.add() */\n        let day = date.getDay()\n        const formattedDate = date.getFullYear().toString() + '-' + date.getMonth().toString() + '-' + date.getDate().toString()\n\n        /* Check if this component was returned by Registration or App.js */\n        let data;\n        if (userRef) {\n            // Create new data for day and add it as a document\n            data = {\n                date: formattedDate,\n                mood: mood,\n                weekday: day,\n                user: userRef\n            }\n        } else {\n            if (props.user) {\n                data = {\n                    date: formattedDate,\n                    mood: mood,\n                    weekday: day,\n                    user: user\n                }\n            }\n        }\n\n        /* If user already has logged data for today, then update() \n            if not, then add() new document for today\n        */\n        getTodayLog().then((todayRef) => {\n            if (todayRef) {\n                todayRef.ref.update(data)\n                    .then(() => {\n                        console.log(\"Document successfully updated\");\n                    }).catch((error) => {\n                        // The document probably doesn't exist.\n                        console.error(\"Error updating document: \", error);\n                    });\n            } else {\n                // New doc for 'today''s date\n                firebase.firestore().collection('moodLog').doc().set(data)\n            }\n        })\n    }\n\n    function logDate(obj) {\n        console.log(obj.date)\n        setDate(obj.date)\n    }\n\n    return (\n\n        <View style={styles.container}>\n            {/* import the context and pass along the data */}\n            <Calendar date={date} logDate={logDate} />\n            <LoggerView selector={<Mood mood={mood} logMood={logMood} />} />\n        </View>\n    );\n}\n\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        backgroundColor: Theme.cream\n    }\n});\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}